{
  "id": "68",
  "title": "Find the Image of a Matrix Using Row Echelon Form",
  "difficulty": "medium",
  "category": "Linear Algebra",
  "video": "",
  "likes": "0",
  "dislikes": "0",
  "contributor": [
    {
      "profile_link": "https://github.com/paddywardle",
      "name": "paddywardle"
    }
  ],
  "description": "\n## Task: Compute the Column Space of a Matrix\n\nIn this task, you are required to implement a function `matrix_image(A)` that calculates the column space of a given matrix `A`. The column space, also known as the image or span, consists of all linear combinations of the columns of `A`. To find this, you'll use concepts from linear algebra, focusing on identifying independent columns that span the matrix's image.\n**Your task:** Implement the function `matrix_image(A)` to return the basis vectors that span the column space of `A`. These vectors should be extracted from the original matrix and correspond to the independent columns.",
  "learn_section": "\n## Matrix Image, Spans, and How to Calculate It\n\nIn linear algebra, the column space, also called the **image** or **span**, of a matrix is the set of all possible linear combinations of its columns. The column space gives important information about the matrix, such as the dimensions and dependencies between columns. It is useful for solving linear systems and understanding the structure of the data in the matrix. The image of a function can also be thought of as all the values the function takes in its codomain. The image of a matrix is the span of its columns - all linear combinations of its columns.\n\nConsider the following matrix $ A $:\n\n$$\nA = \\begin{bmatrix} \n1 & 2 & 3 \\\\\n4 & 5 & 6 \\\\\n7 & 8 & 9\n\\end{bmatrix}\n$$\n\nThe column space of $ A $ is the set of all linear combinations of its columns. In other words, any vector in the column space of $ A $ can be written as:\n\n$$\n\\text{span}(A) = c_1 \\begin{bmatrix} \n1 \\\\\n4 \\\\\n7\n\\end{bmatrix} + c_2 \\begin{bmatrix} \n2 \\\\\n5 \\\\\n8\n\\end{bmatrix} + c_3 \\begin{bmatrix} \n3 \\\\\n6 \\\\\n9\n\\end{bmatrix}\n$$\n\nWhere $ c_1 $, $ c_2 $, and $ c_3 $ are scalars representing the linear combination of the columns of matrix $ A $.\n\n### The Image of a Matrix\n\nThe image of a matrix is spanned by its pivot columns. To find the image of a matrix, you can use the following steps:\n\n1) **Convert to Row Echelon Form (RREF)**\n\nThe first step is to convert the matrix to its RREF using **Gauss-Jordan Elimination**. This finds the independent equations within the matrix. In RREF form:\n- Each non-zero row begins with a leading 1, called a pivot\n- Rows of all zeros are at the bottom of the matrix\n- Each leading 1 is to the right of the leading 1 in the row above\n\n2) **Identify Pivot Columns**\n\nOnce the matrix is in RREF, the pivot columns are the columns that contain the leading 1s in each non-zero row. These columns represent the independent directions that span the column space of the matrix.\n\n3) **Extract Pivot Columns from the Original Matrix**\n\nFinally, to find the column space of the original matrix, you take the columns from the original matrix corresponding to the pivot columns in RREF.\n\n### Applications of Matrix Image\n\nThe matrix image has important applications in:\n\n- **Solving systems of linear equations**\n- **Determining the rank of a matrix**\n- **Understanding linear transformations**\n\nIt is also used in areas such as **data compression**, **computer graphics**, and **signal processing** to analyze and manipulate data effectively.",
  "starter_code": "\nimport numpy as np\n\ndef matrix_image(A):\n\t# Write your code here\n\tpass",
  "solution": "\nimport numpy as np\n\ndef rref(A):\n    # Convert to float for division operations\n    A = A.astype(np.float32)\n    n, m = A.shape\n\n    for i in range(n):\n        if A[i, i] == 0:\n            nonzero_current_row = np.nonzero(A[i:, i])[0] + i\n            if len(nonzero_current_row) == 0:\n                continue\n            A[[i, nonzero_current_row[0]]] = A[[nonzero_current_row[0], i]]\n\n        A[i] = A[i] / A[i, i]\n\n        for j in range(n):\n            if i != j:\n                A[j] -= A[i] * A[j, i]\n    return A\n\ndef find_pivot_columns(A):\n    n, m = A.shape\n    pivot_columns = []\n    for i in range(n):\n        nonzero = np.nonzero(A[i, :])[0]\n        if len(nonzero) != 0:\n            pivot_columns.append(nonzero[0])\n    return pivot_columns\n\ndef matrix_image(A):\n    # Find the RREF of the matrix\n    Arref = rref(A)\n    # Find the pivot columns\n    pivot_columns = find_pivot_columns(Arref)\n    # Extract the pivot columns from the original matrix\n    image_basis = A[:, pivot_columns]\n    return image_basis",
  "example": {
    "input": "matrix = np.array([\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n])\nprint(matrix_image(matrix))",
    "output": "# [[1, 2],\n#  [4, 5],\n#  [7, 8]]",
    "reasoning": "The column space of the matrix is spanned by the independent columns [1, 2], [4, 5], and [7, 8]. These columns form the basis vectors that represent the image of the matrix."
  },
  "test_cases": [
    {
      "test": "\nimport numpy as np\nmatrix = np.array([[1, 0], [0, 1]])\nprint(matrix_image(matrix))\n",
      "expected_output": "[[1, 0], [0, 1]]"
    },
    {
      "test": "\nimport numpy as np\nmatrix = np.array([[1, 2], [2, 4]])\nprint(matrix_image(matrix))\n",
      "expected_output": "[[1], [2]]"
    },
    {
      "test": "\nimport numpy as np\nmatrix = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])\nprint(matrix_image(matrix))\n",
      "expected_output": "[[1, 2], [4, 5], [7, 8]]"
    }
  ]
}